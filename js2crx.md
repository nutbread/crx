# ```js2crx.py```
Converts a Javascript userscript (```.user.js```) into a chrome extension (```.crx```)

#### Required software
[python](https://www.python.org/downloads/) - Versions 2.x or 3.x should both work
[ffmpeg & ffprobe](https://www.ffmpeg.org/download.html) - For icon creation
[chrome](https://www.google.com/chrome/index.html) - For .crx compilation

#### Command line usage
```js2crx.py``` is mainly designed as a command line application. It includes a template Windows batch script ```build.bat``` which can be easily edited to auto-build a project. Simply edit the ```EDIT_THIS``` parts in it.

Arguments are passed into ```js2crx.py``` using short (```-v```) or verbose (```--version```) flags.

Executing ```js2crx.py --usage``` will list the available flags, their aliases, and a short description. Reading ```build.bat``` also helps.

#### Library import usage
```js2crx.py``` should also be able to be imported as a library and executed in a similar manner to the command line version. This is untested/undocumented, but there's no real reason why it shouldn't work. If this functionality is required, reading through ```js2crx.py```'s ```main``` should give some insight.

#### Userscript metadata
Typical userscript files contain a [metadata block](http://wiki.greasespot.net/Metadata_Block) at the top of the file. To specify additional info for the ```.crx``` file, an additional ```ChromeExtension``` metadata block should follow it. Example:

```javascript
// ==ChromeExtension==
// @permission  storage
// @icon-size   16:bilinear
// @icon-size   32:bilinear
// @icon-size   128:neighbor
// @require     additional_javascript.js
// @resource    resource_filename.html
// @update-url  https://example.com/userscript.update.xml
// ==/ChromeExtension==
```

<ul>
	<li>
		<b>@</b><b>permission</b> value <i>(multiple allowed)</i><br />
		A <a href="https://developer.chrome.com/extensions/declare_permissions" target="_blank">chrome extension permission</a>
	</li>
	<li>
		<b>@</b><b>icon-size</b> size <i>(multiple allowed)</i><br />
		<b>@</b><b>icon-size</b> size:resizer (multiple allowed)<br />
		An <a href="https://developer.chrome.com/extensions/manifest/icons" target="_blank">icon size integer</a>, followed by an optional <a href="https://www.ffmpeg.org/ffmpeg-scaler.html#sws_005fflags" target="_blank">ffmpeg scaler</a>
	</li>
	<li>
		<b>@</b><b>require</b> javascript_file <i>(multiple allowed)</i><br />
		A local path (relative to the location of the initial <code>.user.js</code> script) to an additional Javascript file. This should be used if the <code>==UserScript==</code> block contains any <b>@</b><b>require</b>s.
	</li>
	<li>
		<b>@</b><b>resource</b> filename <i>(multiple allowed)</i><br />
		A local path (relative to the location of the initial <code>.user.js</code> script) to an additional resource file. This should be used if the <code>==UserScript==</code> block contains any <b>@</b><b>resource</b>s.
	</li>
	<li>
		<b>@</b><b>update-url</b> url<br />
		A URL to the update.xml file generated by <code>js2crx.py</code>.
	</li>
</ul>

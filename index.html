<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="description" content="Tools for building chrome extensions" />
	<meta name="keywords" content="crx,tools,crx tools,chrome,chromium,userscript,userscripts,greasemonkey,extension,addon,chrome-extension,javascript,python,windows" />
	<meta name="author" content="nutbread" />
	<title>crx tools</title>
	<link rel="shortcut icon" href="favicon.png" />
	<link rel="stylesheet" href="style.css" />
</head>
<body>


<div class="header_bar">
	<div class="main main_no_overflow header">

		<table class="header_table"><tbody>
			<tr>
				<td class="header_table_cell">
					<div class="header_table_name">
						<a class="header_table_name_user link_external link_author light_underline" href="https://github.com/nutbread" target="_blank"><span>nutbread</span></a><span class="header_table_name_separator">/</span><a href="" class="header_table_name_title link_external link_title light_underline"><span>crx</span></a>
					</div>
				</td>
				<td class="header_table_cell">
					<div class="header_table_separator"></div>
				</td>
				<td class="header_table_cell header_table_cell_full">
					<div class="header_table_description">
						<div class="header_table_description_name">crx tools</div>
						<div class="header_table_description_body">Tools for building Chrome extensions</div>
					</div>
				</td>
				<td class="header_table_cell">
					<a class="header_table_view_on_github link_external link_view_on_github light_nohover_color_hover" href="https://github.com/nutbread/crx" target="_blank">
						<div class="header_table_view_on_github_line1">view on</div>
						<div class="header_table_view_on_github_line2">github</div>
					</a>
				</td>
			</tr>
		</tbody></table>

	</div>
</div>
<div class="main body">

	<h1 id="js2crx.py"><span class="hardlink_text">js2crx.py<a class="hardlink" href="#js2crx.py">#</a></span></h1>
	<p>
		Converts a Javascript userscript (<code>.user.js</code>) into a chrome extension (<code>.crx</code>)
	</p>

	<h4 id="files"><span class="hardlink_text">Files<a class="hardlink" href="#files">#</a></span></h4>
	<p>
		<ul>
			<li><a class="link_codebase light_underline" href="https://github.com/nutbread/crx/blob/master/src/js2crx.py" target="_blank" download="js2crx.py"><span>js2crx.py</span></a> / <a class="link_codebase_raw light_underline" href="https://raw.githubusercontent.com/nutbread/crx/master/src/js2crx.py" target="_blank" download="js2crx.py"><span>download</span></a> &ndash; main python application</li>
			<li><a class="link_codebase light_underline" href="https://github.com/nutbread/crx/blob/master/src/build.bat" target="_blank" download="build.bat"><span>build.bat</span></a> / <a class="link_codebase_raw light_underline" href="https://raw.githubusercontent.com/nutbread/crx/master/src/js2crx.py" target="_blank" download="js2crx.py"><span>download</span></a> &ndash; template build script</li>
		</ul>
	</p>

	<h4 id="required.software"><span class="hardlink_text">Required software<a class="hardlink" href="#required.software">#</a></span></h4>
	<p>
		<ul>
			<li><a class="link_external light_underline" href="https://www.python.org/downloads/" target="_blank"><span>python</span></a> &ndash; versions 2.x or 3.x should both work</li>
			<li><a class="link_external light_underline" href="https://www.ffmpeg.org/download.html" target="_blank"><span>ffmpeg &amp; ffprobe</span></a> &ndash; for icon creation</li>
			<li><a class="link_external light_underline" href="https://www.google.com/chrome/index.html" target="_blank"><span>chrome</span></a> &ndash; for <code>.crx</code> compilation</li>
		</ul>
	</p>

	<h4 id="command.line"><span class="hardlink_text">Command line usage<a class="hardlink" href="#command.line">#</a></span></h4>
	<p>
		<code>js2crx.py</code> is mainly designed as a command line application. It includes a template Windows batch script <code>build.bat</code> which can be easily edited to auto-build a project. Simply edit the <code>EDIT_THIS</code> parts in it.
	</p>
	<p>
		Arguments are passed into <code>js2crx.py</code> using short (<code>-v</code>) or verbose (<code>--version</code>) flags. Executing <code class="nowrap">js2crx.py --usage</code> will list the available flags, their aliases, and a short description. Reading <code>build.bat</code> also helps.
	</p>

	<h4 id="library"><span class="hardlink_text">Library import usage<a class="hardlink" href="#library">#</a></span></h4>
	<p>
		<code>js2crx.py</code> should also be able to be imported as a library and executed in a similar manner to the command line version. This is untested/undocumented, but there's no real reason why it shouldn't work. If this functionality is required, reading through <code>js2crx.py</code>'s <code>main</code> should give some insight.
	</p>

	<h4 id="metadata"><span class="hardlink_text">Userscript metadata<a class="hardlink" href="#metadata">#</a></span></h4>
	<p>
		Typical userscript files contain a <a class="link_external light_underline" href="http://wiki.greasespot.net/Metadata_Block" target="_blank"><span>metadata block</span></a> at the top of the file. To specify additional info for building the <code>.crx</code> file, an additional <code>==ChromeExtension==</code> metadata block should follow it. For example:
	</p>
	<p>
		<div class="codeblock codeblock_pre"><div class="codeblock_inner">// ==ChromeExtension==
// @permission  storage
// @icon-size   16:bilinear
// @icon-size   32:bilinear
// @icon-size   128:neighbor
// @require     additional_javascript.js
// @resource    resource_filename.html
// @update-url  https://example.com/userscript.update.xml
// ==/ChromeExtension==</div></div>
	</p>
	<p>
		The following tags are allowed:
	</p>
	<p>
		<ul>
			<li>
				<strong>@permission</strong> value <span class="light italic">(multiple allowed)</span><br />
				A <a class="link_external light_underline" href="https://developer.chrome.com/extensions/declare_permissions" target="_blank"><span>chrome extension permission</span></a>.
			</li>
			<li>
				<strong>@icon-size</strong> size[:resizer] <span class="light italic">(multiple allowed)</span><br />
				An <a class="link_external light_underline" href="https://developer.chrome.com/extensions/manifest/icons" target="_blank"><span>icon size integer</span></a>, followed by an optional <a class="link_external light_underline" href="https://www.ffmpeg.org/ffmpeg-scaler.html#sws_005fflags" target="_blank"><span>ffmpeg scaler</span></a>. These are used to auto-generate icons from the existing userscript icon.
			</li>
			<li>
				<strong>@require</strong> javascript_file <span class="light italic">(multiple allowed)</span><br />
				A local path (relative to the location of the initial <code>.user.js</code> script) to an additional Javascript file.<br />
				This should be used if the <code>==UserScript==</code> block contains any <strong>@require</strong> tags.
			</li>
			<li>
				<strong>@resource</strong> filename <span class="light italic">(multiple allowed)</span><br />
				A local path (relative to the location of the initial <code>.user.js</code> script) to an additional resource file.<br />
				This should be used if the <code>==UserScript==</code> block contains any <strong>@resource</strong> tags.
			</li>
			<li>
				<strong>@update-url</strong> url<br />
				A URL to the <code>update.xml</code> file generated by <code>js2crx.py</code>.
			</li>
		</ul>
	</p>

</div>


</body>
</html>

